{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\work\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\work\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"D:\\\\work\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\work\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\work\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\work\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\work\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\work\\\\client\\\\src\\\\components\\\\user\\\\user.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { fetchNews, fetchNewsError, fetchNewsPending, fetchNewsSuccess } from '../../actions';\nimport { compose } from \"../../utils\";\nimport { withBookstoreService } from \"../hoc\"; // import LoadingSpinner from \"../spinner\";\n// import ErrorBoundry from \"../error-boundry\";\n\nimport '../news/news.css';\n\nvar User = /*#__PURE__*/function (_React$Component) {\n  _inherits(User, _React$Component);\n\n  function User() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, User);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(User)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this._apiBase = \"http://localhost:3000/auth\";\n\n    _this.getResource = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(url) {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetch(\"\".concat(_this._apiBase).concat(url), {\n                  mode: \"no-cors\"\n                });\n\n              case 2:\n                res = _context.sent;\n                return _context.abrupt(\"return\", res);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.getAllPeople = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _this.getResource(\"\");\n\n            case 2:\n              res = _context2.sent;\n              console.log(res);\n              _context2.next = 6;\n              return res;\n\n            case 6:\n              return _context2.abrupt(\"return\", _context2.sent);\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    _this.add = function () {\n      _this.getAllPeople().then(function (res) {\n        console.log(res);\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(User, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      //console.log(this.getAllPeople())\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 9\n        }\n      }, \"Home\"), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this2.add();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 9\n        }\n      }, \"click\"), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this2.fetchN();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 9\n        }\n      }, \"Cclick\"));\n    }\n  }]);\n\n  return User;\n}(React.Component);\n\nexport function fetchN() {\n  return /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              dispatch(fetchNewsPending());\n              _context3.next = 3;\n              return fetch('localhost:3000/auth').then(function (res) {\n                return res.json();\n              }).then(function (res) {\n                if (res.error) {\n                  throw res.error;\n                }\n\n                console.log(res);\n                dispatch(fetchNewsSuccess(res.articles));\n                return res;\n              }).catch(function (error) {\n                dispatch(fetchNewsError(error));\n              });\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function (_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n}\n\nvar mapStateToProps = function mapStateToProps(_ref4) {\n  var _ref4$newsList = _ref4.newsList,\n      products = _ref4$newsList.products,\n      pending = _ref4$newsList.pending,\n      error = _ref4$newsList.error;\n  return {\n    products: products,\n    pending: pending,\n    error: error\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    fetchProducts: fetchNews\n  }, dispatch);\n};\n\nexport default compose(withBookstoreService(), connect(mapStateToProps, mapDispatchToProps))(User);","map":{"version":3,"sources":["D:/work/client/src/components/user/user.js"],"names":["React","connect","bindActionCreators","fetchNews","fetchNewsError","fetchNewsPending","fetchNewsSuccess","compose","withBookstoreService","User","_apiBase","getResource","url","fetch","mode","res","getAllPeople","console","log","add","then","catch","err","fetchN","Component","dispatch","json","error","articles","mapStateToProps","newsList","products","pending","mapDispatchToProps","fetchProducts"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,kBAAR,QAAiC,OAAjC;AACA,SACEC,SADF,EAEEC,cAFF,EAGEC,gBAHF,EAIEC,gBAJF,QAKO,eALP;AAOA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,oBAAR,QAAmC,QAAnC,C,CACA;AACA;;AACA,OAAO,kBAAP;;IAEMC,I;;;;;;;;;;;;;;;UAEJC,Q,GAAW,4B;;UAEXC,W;0EAAc,iBAAOC,GAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACMC,KAAK,WAAI,MAAKH,QAAT,SAAoBE,GAApB,GAA2B;AAChDE,kBAAAA,IAAI,EAAE;AAD0C,iBAA3B,CADX;;AAAA;AACNC,gBAAAA,GADM;AAAA,iDASJA,GATI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;UAYdC,Y,yEAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACK,MAAKL,WAAL,IADL;;AAAA;AACPI,cAAAA,GADO;AAEbE,cAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AAFa;AAAA,qBAGAA,GAHA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;UAMfI,G,GAAM,YAAM;AACV,YAAKH,YAAL,GACGI,IADH,CACQ,UAACL,GAAD,EAAQ;AAAEE,QAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AAAiB,OADnC,EAEGM,KAFH,CAES,UAAAC,GAAG;AAAA,eAAIL,OAAO,CAACC,GAAR,CAAYI,GAAZ,CAAJ;AAAA,OAFZ;AAGD,K;;;;;;;6BACQ;AAAA;;AACP;AACA,0BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAQ,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAACH,GAAL,EAAN;AAAA,SAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFF,eAGE;AAAQ,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAACI,MAAL,EAAN;AAAA,SAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHF,CADF;AAQD;;;;EArCgBvB,KAAK,CAACwB,S;;AAyCzB,OAAO,SAASD,MAAT,GAAkB;AACvB;AAAA,yEAAO,kBAAME,QAAN;AAAA;AAAA;AAAA;AAAA;AACLA,cAAAA,QAAQ,CAACpB,gBAAgB,EAAjB,CAAR;AADK;AAAA,qBAECQ,KAAK,CAAC,qBAAD,CAAL,CACHO,IADG,CACE,UAAAL,GAAG;AAAA,uBAAIA,GAAG,CAACW,IAAJ,EAAJ;AAAA,eADL,EAEHN,IAFG,CAEE,UAAAL,GAAG,EAAI;AACX,oBAAIA,GAAG,CAACY,KAAR,EAAe;AACb,wBAAMZ,GAAG,CAACY,KAAV;AACD;;AACDV,gBAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACAU,gBAAAA,QAAQ,CAACnB,gBAAgB,CAACS,GAAG,CAACa,QAAL,CAAjB,CAAR;AACA,uBAAOb,GAAP;AACD,eATG,EAUHM,KAVG,CAUG,UAAAM,KAAK,EAAI;AACdF,gBAAAA,QAAQ,CAACrB,cAAc,CAACuB,KAAD,CAAf,CAAR;AACD,eAZG,CAFD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP;;AAAA;AAAA;AAAA;AAAA;AAgBD;;AAED,IAAME,eAAe,GAAG,SAAlBA,eAAkB,QAA4C;AAAA,6BAA1CC,QAA0C;AAAA,MAA/BC,QAA+B,kBAA/BA,QAA+B;AAAA,MAArBC,OAAqB,kBAArBA,OAAqB;AAAA,MAAZL,KAAY,kBAAZA,KAAY;AAClE,SAAO;AAACI,IAAAA,QAAQ,EAARA,QAAD;AAAWC,IAAAA,OAAO,EAAPA,OAAX;AAAoBL,IAAAA,KAAK,EAALA;AAApB,GAAP;AACD,CAFD;;AAKA,IAAMM,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAR,QAAQ;AAAA,SAAIvB,kBAAkB,CAAC;AAGxDgC,IAAAA,aAAa,EAAE/B;AAHyC,GAAD,EAKtDsB,QALsD,CAAtB;AAAA,CAAnC;;AAQA,eAAelB,OAAO,CAACC,oBAAoB,EAArB,EAAyBP,OAAO,CAAC4B,eAAD,EAAkBI,kBAAlB,CAAhC,CAAP,CAA8ExB,IAA9E,CAAf","sourcesContent":["import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport {\r\n  fetchNews,\r\n  fetchNewsError,\r\n  fetchNewsPending,\r\n  fetchNewsSuccess\r\n} from '../../actions';\r\n\r\nimport {compose} from \"../../utils\";\r\nimport {withBookstoreService} from \"../hoc\";\r\n// import LoadingSpinner from \"../spinner\";\r\n// import ErrorBoundry from \"../error-boundry\";\r\nimport '../news/news.css'\r\n\r\nclass User extends React.Component {\r\n  \r\n  _apiBase = \"http://localhost:3000/auth\";\r\n  \r\n  getResource = async (url) => {\r\n    const res = await fetch(`${this._apiBase}${url}`, {\r\n      mode: \"no-cors\"\r\n    });\r\n    \r\n    // if (!res.ok) {\r\n    //   throw new Error(`CCould not fetch ${url}` +\r\n    //     `, received ${res.status}`)\r\n    // }\r\n    return  res;\r\n    \r\n  };\r\n  getAllPeople = async () => {\r\n    const res = await this.getResource(``);\r\n    console.log(res)\r\n    return await res\r\n  };\r\n  \r\n  add = () => {\r\n    this.getAllPeople()\r\n      .then((res)=> { console.log(res)})\r\n      .catch(err => console.log(err))\r\n  }\r\n  render() {\r\n    //console.log(this.getAllPeople())\r\n    return (\r\n      <div>\r\n        <h1>Home</h1>\r\n        <button onClick={() => this.add()}>click</button>\r\n        <button onClick={() => this.fetchN()}>Cclick</button>\r\n      </div>\r\n    \r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport function fetchN() {\r\n  return async dispatch => {\r\n    dispatch(fetchNewsPending());\r\n    await fetch('localhost:3000/auth')\r\n      .then(res => res.json())\r\n      .then(res => {\r\n        if (res.error) {\r\n          throw(res.error);\r\n        }\r\n        console.log(res)\r\n        dispatch(fetchNewsSuccess(res.articles))\r\n        return res;\r\n      })\r\n      .catch(error => {\r\n        dispatch(fetchNewsError(error));\r\n      })\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({newsList: {products, pending, error}}) => {\r\n  return {products, pending, error};\r\n};\r\n\r\n\r\nconst mapDispatchToProps = dispatch => bindActionCreators({\r\n  \r\n  \r\n  fetchProducts: fetchNews\r\n  \r\n}, dispatch)\r\n\r\n\r\nexport default compose(withBookstoreService(), connect(mapStateToProps, mapDispatchToProps))(User);\r\n"]},"metadata":{},"sourceType":"module"}